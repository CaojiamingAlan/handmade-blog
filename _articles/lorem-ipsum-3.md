---
id: 4
title: "字节跳动上班第一天"
date: "2021.7.19"
tags: "日记"
---

今天第一天去字节上班。食堂什么的都不说了，最令我impressive的是他们的电梯。

在这栋总部的楼里可能有上千人。哪怕是有六部电梯，用一般的电梯调度算法也很难做到很好的分配。

一般的电梯算法只检测当前方向上有没有人按下按钮，在高峰期很容易一层一停，在不停的加速————减速————开门————关门的循环中浪费了大量的时间。

所以，如果有一个集中的调度算法经过合理的规划没部电梯的停留楼层，电梯的运送效率将大大提升。

字节电梯的调度就是这样的。所有人在外面刷卡选择自己要去的楼层。然后刷卡处的屏幕会告诉你哪个电梯会送你去。今天一天下来，哪怕是在高峰期，平均每次从1楼到20层只需要在中间停2～3次。这在传统的电梯调度算法里是不可想象的。能够做到这一点，靠的就是一个中央的“大脑”给每个电梯分配楼层，并让同一层的乘客到同一部电梯，从而大大提升效率。

除此之外，系统还会估测电梯的剩余运力并作出相应判断。运力的估算可能是通过检测重量，也可能是通过CV，咱也不太清楚。如果电梯过于拥挤或繁忙，那么后面的人在刷卡时，系统会直接拒绝搭载你，优先去搭载那些依然在队列中等待的乘客以及和他们同楼层的乘客（为了多数人的利益您就牺牲一下吧hhh）。假设你在10楼，想去12楼，但是电梯里全是1楼想去20楼的人，那么这部电梯会直接无视你，为电梯里的所有人省下一次停下关门的时间。之后系统会给你安排另一部电梯。有时也会出现你要向上，电梯搭载了你，但是却先向下去接别人的情况。

我不清楚背后的算法具体是怎么样的。毕竟这是一个信息不完全并且一直在变化的优化问题，优化的量为所有人的等待时间。这种需要有前瞻性的问题有无限的发挥空间。毕竟科技公司嘛，最不缺的就是会算法的 ：）